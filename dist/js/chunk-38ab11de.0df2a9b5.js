(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38ab11de"],{"25f0":function(e,t,r){"use strict";var n=r("6eeb"),a=r("825a"),i=r("d039"),l=r("ad6d"),c="toString",o=RegExp.prototype,s=o[c],u=i((function(){return"/a/b"!=s.call({source:"a",flags:"b"})})),d=s.name!=c;(u||d)&&n(RegExp.prototype,c,(function(){var e=a(this),t=String(e.source),r=e.flags,n=String(void 0===r&&e instanceof RegExp&&!("flags"in o)?l.call(e):r);return"/"+t+"/"+n}),{unsafe:!0})},"263e":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"publish-container"},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("my-breadcrumb",[e._v("编辑文章")])],1),r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.article,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{model:{value:e.article.title,callback:function(t){e.$set(e.article,"title",t)},expression:"article.title"}})],1),r("el-form-item",{attrs:{label:"内容",prop:"content"}},[r("quill-editor",{attrs:{options:e.editorOption},model:{value:e.article.content,callback:function(t){e.$set(e.article,"content",t)},expression:"article.content"}})],1),r("el-form-item",{attrs:{label:"封面"}},[r("el-radio-group",{on:{change:function(t){e.article.cover.images=[]}},model:{value:e.article.cover.type,callback:function(t){e.$set(e.article.cover,"type",t)},expression:"article.cover.type"}},[r("el-radio",{attrs:{label:1}},[e._v("单图")]),r("el-radio",{attrs:{label:3}},[e._v("三图")]),r("el-radio",{attrs:{label:0}},[e._v("无图")]),r("el-radio",{attrs:{label:-1}},[e._v("自动")])],1)],1),e.article.cover.type>0?r("el-form-item",[r("el-row",{attrs:{gutter:10}},e._l(e.article.cover.type,(function(t,n){return r("el-col",{key:n,attrs:{xs:8,sm:6,md:6,lg:4}},[r("my-cover",{model:{value:e.article.cover.images[n],callback:function(t){e.$set(e.article.cover.images,n,t)},expression:"article.cover.images[idx]"}})],1)})),1)],1):e._e(),r("el-form-item",{attrs:{label:"频道",prop:"channel_id"}},[r("el-select",{attrs:{placeholder:"请选择频道"},model:{value:e.article.channel_id,callback:function(t){e.$set(e.article,"channel_id",t)},expression:"article.channel_id"}},e._l(e.channels,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("编辑文章")]),r("el-button",{on:{click:function(t){return e.onSubmit(!0)}}},[e._v("存入草稿")])],1)],1)],1)],1)},a=[],i=(r("d3b7"),r("25f0"),r("96cf"),r("1da1")),l=r("a4fb"),c=r("663f"),o=r("2423"),s=(r("8096"),r("14e1"),r("953d")),u={name:"EditArticle",props:{},components:{MyBreadcrumb:c["a"],quillEditor:s["quillEditor"],MyCover:l["a"]},data:function(){return{rules:{title:[{required:!0,message:"请输入文章标题",trigger:"blur"},{min:5,max:30,message:"标题长度为5到30之间",trigger:"blur"}],content:[{required:!0,message:"请输入文章内容",trigger:"blur"},{min:20,message:"标题长度最少为20",trigger:"blur"}],channel_id:[{required:!0,message:"请选择频道",trigger:"blur"}]},article:{title:"",channel_id:"",content:"",cover:{type:0,images:[]}},isDraft:!1,channels:[],editorOption:{placeholder:"",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["image"]]}}}},methods:{loadArticleById:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.$route.params.id.toString(),e.isDraft=e.$route.query.isDraft,t.next=5,Object(o["d"])(r);case 5:n=t.sent,console.log(n),e.article=n.data.data,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0),e.$message.error("获取文章失败");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},loadArticleChannels:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o["f"])();case 3:r=t.sent,e.channels=r.data.data.channels,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0),e.$message.error("频道加载失败");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},loadArticle:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},hEditArticle:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o["c"])(e.article,e.isDraft);case 3:e.$message.success("文章编辑成功"),e.$router.push("/articles"),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0),e.$message.error("文章编辑失败");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},onSubmit:function(e){var t=this;this.isDraft=e||this.isDraft,this.$refs.form.validate((function(e){if(!e)return!1;t.hEditArticle()}))}},computed:{},created:function(){this.loadArticleById(),this.loadArticleChannels()},mounted:function(){}},d=u,m=(r("3342"),r("2877")),f=Object(m["a"])(d,n,a,!1,null,"71166e1e",null);t["default"]=f.exports},3342:function(e,t,r){"use strict";var n=r("c869"),a=r.n(n);a.a},ad6d:function(e,t,r){"use strict";var n=r("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},c869:function(e,t,r){}}]);
//# sourceMappingURL=chunk-38ab11de.0df2a9b5.js.map